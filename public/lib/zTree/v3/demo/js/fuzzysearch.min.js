function fuzzySearch(k,m,c,e){var a=$.fn.zTree.getZTreeObj(k);if(!a){alert("fail to get ztree object")}var d=a.setting.data.key.name;c=c===false?false:true;e=e?true:false;a.setting.view.nameIsHTML=c;var i="[\\[\\]\\\\^\\$\\.\\|\\?\\*\\+\\(\\)]";var f=new RegExp(i,"gi");function b(n,p,o){if(!p){p=""}function r(s){if(s&&s.oldname&&s.oldname.length>0){s[d]=s.oldname}n.updateNode(s);if(p.length==0){n.showNode(s);n.expandNode(s,e);return true}if(s[d]&&s[d].toLowerCase().indexOf(p.toLowerCase())!=-1){if(c){var u=p.replace(f,function(v){return"\\"+v});s.oldname=s[d];var t=new RegExp(u,"gi");s[d]=s.oldname.replace(t,function(w){var v='<span style="color: whitesmoke;background-color: darkred;">'+w+"</span>";return v});n.updateNode(s)}n.showNode(s);return true}n.hideNode(s);return false}var q=n.getNodesByFilter(r);h(q,p)}function h(p,o){if(p&&p.length>0){if(o.length>0){$.each(p,function(t,s){var r=s.getPath();if(r&&r.length>0){for(var q=0;q<r.length-1;q++){a.showNode(r[q]);a.expandNode(r[q],true)}}})}else{var n=a.getNodesByParam("level","0");$.each(n,function(r,q){a.expandNode(q,true)})}}}$(m).bind("input propertychange",function(){var n=$(this).val();l(n)});var j=null;var g="";function l(n){if(j){clearTimeout(j)}j=setTimeout(function(){if(g===n){return}b(a,n);g=n},500)}};